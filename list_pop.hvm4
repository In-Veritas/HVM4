@pop = 位{
  []: 位x.[];
  <>: 位&h,&t,&x.
  ! eq = x == h;
  (位{
    0: h <> @pop(t, x)
    1: t
  })(eq)
}

@main = @pop([1,2,3,4,5], 3)